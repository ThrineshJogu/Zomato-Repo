pipeline {
    agent any
    environment{
        scannerHome = tool 'mysonar'
    }
    stages {
        stage('clean ws'){
            steps {
                cleanWs()
            }
        }
        stage('code'){
            steps{
                git branch: 'main', url: 'https://github.com/ThrineshJogu/Zomato-Repo.git'
            }
        }
        stage('CQA'){
            steps{
                withSonarQubeEnv('mysonar') {
                  sh "${scannerHome}/bin/sonar-scanner -Dsonar.projectKey=Zomato"
                }
            }
        }
        stage('image'){
            steps{
                sh 'docker build -t image .'
            }
        }
    }
}
